{% extends "manage.html" %}

{% block title %} Course {% endblock title %}

{% block subtitle %} {{ course.name }} {% endblock %}

{% block css %}
<link rel="stylesheet" media="all" type="text/css" href="{{ URL_ROOT }}/static/yaksh/css/course.css" />
{% endblock %}
{% block script %}
<script language="JavaScript" type="text/javascript" src="{{ URL_ROOT }}/static/yaksh/js/jquery-1.4.2.min.js"></script>
<script>
$(document).ready(function(){
$(".checkall").click( function(){
        if($(this).attr("checked")) {
                $("#enroll-all input:checkbox").each(function(index, element) {
                $(this).attr('checked', true);
                });
        }
        else {
                $("#enroll-all input:checkbox").each(function(index, element) {
                $(this).attr('checked', false);
                });
        }
    });
});
</script>
{% endblock %}
{% block manage %}
<div class="row">
    <div class="span6 wrap">
        <center><b><u>Requests</u></b></center><br>
        <form action="{{URL_ROOT}}/exam/manage/enroll/{{ course.id }}" method="post">
        {% csrf_token %}
        <input type="checkbox" class="checkall"/><font size="2">Enroll all</font>
        <div id="enroll-all">
        {% for request in course.get_requests %}
        <div class="well">
            <div class="row">
            <div class="span3" style="padding-top:10px">
               <input type="checkbox" name="check" value="{{ request.id }}"></input>&nbsp;&nbsp;<a href="#" data-toggle="tooltip" title=" Institute: {{ request.profile.institute }}&#013;Department: {{ request.profile.department}}&#013;Roll Number: {{ request.profile.roll_number }}">{{ request.username }}</a><br>
                </div>
                <a class="btn success" href="{{URL_ROOT}}/exam/manage/enroll/{{ course.id }}/{{ request.id }}/"> Enroll </a>  <a class="btn danger" href="{{URL_ROOT}}/exam/manage/reject/{{ course.id }}/{{ request.id }}/"> Reject </a>
            </div>
        </div>
        {% endfor %}
        </div>
    </div>
    <div class="span6 wrap">
        <center><b><u>Rejected</u></b></center><br>
        {% for rejected in course.get_rejected %}
        <div class="well">
            <div class="row">
                <div class="span4" style="padding-top:10px">
                    {{ rejected.username }}
                </div>
                <a class="btn success" href="{{URL_ROOT}}/exam/manage/enroll/rejected/{{ course.id }}/{{ rejected.id }}/"> Enroll </a>
            </div>
        </div>
        {% endfor %}
    </div>
</div>
<br>
<button class="btn" type="submit" name='enroll' value='enroll'>Enroll</button>
</form>
<div class="row">
    <div class="span6 offset4 wrap">
        <center><b><u>Enrolled</u></b></center><br>
        {% for enrolled in course.get_enrolled %}
        <div class="well">
            <div class="row">
                <div class="span4" style="padding-top:10px">
                    {{ enrolled.username }}
                </div>
                <a class="btn danger" href="{{URL_ROOT}}/exam/manage/enrolled/reject/{{ course.id }}/{{ enrolled.id }}/"> Reject </a>
            </div>
        </div>
        {% endfor %}
    </div>
</div>
<div class="pull-right">
            <a class="btn primary" href="{{URL_ROOT}}/exam/manage/toggle_status/{{ course.id }}/">{% if course.active %}Deactivate Course {% else %} Activate Course {% endif %}</a>
</div>
{% endblock %}
